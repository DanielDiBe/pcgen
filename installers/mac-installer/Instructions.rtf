{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf230
{\fonttbl\f0\fnil\fcharset77 Verdana-Bold;\f1\fnil\fcharset77 Verdana;\f2\fnil\fcharset77 LucidaGrande;
\f3\fnil\fcharset77 Verdana-Italic;\f4\fnil\fcharset77 Monaco;\f5\fswiss\fcharset77 ArialMT;
\f6\fnil\fcharset77 LucidaGrande-Bold;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww14560\viewh17080\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f0\b\fs24 \cf0 Subject: 
\f1\b0 PCGen Mac Build\

\f0\b \
Written by: 
\f1\b0 Conor Schutzman <conor@mac.com>\

\f0\b Updated by: 
\f1\b0 Eddy Anthony <eddyba@mindspring.com>\

\f0\b \

\f1\b0 Here is a fairly complete set of instructions on how to bundle PCGen for OS X.  \
\

\f0\b Step 1:
\f1\b0  Get everything you need. \
\

\f0\b 1 A)
\f1\b0  So, first off, you will need the OS X developer tools installed.  If they didn't come with your computer/OS then you can setup a free Apple Developer Connection account (http://www.apple.com/developer) and download them from there.  The current version is XCode Tools 2.2.   \

\f0\b 1 B)
\f1\b0  You will also need to make sure that you have all of your OS updates installed.   \

\f0\b 1 C)
\f1\b0  Lastly, you will need the support files in this module of the PCGen project at:\
https://svn.sourceforge.net/pcgen/Trunk/installers/
\f2 mac-installer
\f1 .   \

\f0\b 1 D)
\f1\b0  Oh, and of course you will need to download the full version of PCGen from SF. \
\
Now that we have all the parts and pieces, we can start to assemble. \
\

\f0\b Step 2: 
\f1\b0 Converting PCGen to be an OS X app \
\

\f0\b 2 A)
\f1\b0  Launch /Developer/Applications/Java Tools/Jar Bundler \

\f0\b 2 B)
\f1\b0  On the Build Information tab, click on the choose button to the right of the Main Class field.  Navigate to pcgen.jar \

\f0\b 2 C)
\f1\b0  Make sure the "Use Macintosh Menu Bar" is 
\f0\b not
\f1\b0  checked, in OS 10.4 Apple changed the way the menu bar in java is handled and checking this will cause the app to crash on launch in Tiger. \

\f0\b 2 D)
\f1\b0  Make sure the "Anti-Alias Text", "Anti-alias Graphics", and "Growbox Intrudes" checkboxs are all checked. \

\f0\b 2 E)
\f1\b0  Make sure the JVM version is 1.4+ \

\f0\b 2 F)
\f1\b0  Under the Custom Icon preview, click Choose Icon, navigate to "
\f2 PCGenApp.icns
\f1 " in the mac-installer/graphics/icon folder. You will probably have to paste it on the app after it is built anyway, I've found that it does not stick for some reason.\

\f0\b 2 G)
\f1\b0  Switch to the Properties tab.  In the Type field, verify that it is APPL.  Enter "PCGn" (without the quotes) into the Signature Field. \

\f0\b 2 H)
\f1\b0  In the Identifier field, enter: com.codemonkey.pcgen \

\f0\b 2 I)
\f1\b0  Enter relevant information into the Version, Get-Info String, and Short Version fields. \

\f0\b 2 J)
\f1\b0  In the VM Options enter: -Xms128m -Xmx256m\

\f0\b 2 J)
\f1\b0  In the Bundle Name field, enter: PCGen <version number>\

\f0\b 2 L)
\f1\b0  Make sure that "Set Working Directory to Inside Application Package" is checked.\

\f0\b 2 M)
\f1\b0  Switch back to the Build Information tab and click the Create Application button.  Save the application as PCGen <version number>.app into the folder you downloaded off of SF. 	\
\
This will encapsulate the PCGen jar file into an OS X application.  We then need to add the applications sub folders into the PCGen application package. \
\

\f0\b Step 3: 
\f1\b0 Adding all the sub folders to the application\
\

\f0\b 3 A)
\f1\b0  Navigate (in Finder) to the folder where you put PCGen.app \

\f0\b 3 B)
\f1\b0  Right click on the application icon, and choose Show Package Contents from the contextual menu. \

\f0\b 3 C)
\f1\b0  Navigate to ./Contents/Resources/Java within the application package. \

\f0\b 3 D)
\f1\b0  Move
\f3\i  
\f1\i0  the sub folders from the PCGen folder into the Java folder listed above.  These folders are: characters, data, docs, lib, outputsheets, plugins and system.\

\f0\b 3 E)
\f1\b0  Close the application package window.  Launch PCGen, verify that basic functionality is there. If you did not check "Set Working Directory to Inside Application Package" in the Jar Bundler things will appear terribly wrong at this point. Once you have verified that PCGen is working as it should quit the program and go back into /Contents/Resources/Java and remove the .ini preference files that were created when you ran the program.\
\
Now that we have the PCGen application all built, we can clean up the folder, removing all those ugly Windows files :-P \
\

\f0\b Step 4: 
\f1\b0 Cleaning things up\
\
4 A) Delete pcgen_high_mem.bat, pcgen.bat, pcgen.jar (it is now contained in the application), and pcgen.sh \
4 B) Move the archive folder from a previous OS X PCGen distro into this PCGen folder. \
4 C) Copy the text from release notes into ReadMe.rtf in the English.proj subfolder in the archive folder.  Once the content is in the RTF file, you can delete the HTML release notes. \
4 D) Verify that the lib folder is still in the PCGen folder. \
4 E) Close the Finder window for the PCGen folder \
4 F) If you have one, run one of the applications that destroys resource forks.  None of our files need a resource fork, and if they picked one up, it can cause oddities in later steps. \
4 G) Rename the folder for PCGen into "PCGen x.x.xx" (without the quotes of course).  Empty your trash. \
4 H) Launch Terminal, type in the following command.  Where I use the text <drag PCGen folder>, do just that, drag the folder for PCGen into the terminal window, the path to it will be input for you. \
find <drag PCGen folder> -name .DS_Store -delete \
4 I) Once that process completes in terminal, also enter this text: \
find <drag PCGen folder> -name .Trashes -delete \
4 J) Create a new folder in Finder, and put PCGen folder in it (it does not matter what the folder is named, or where that folder is located, just that it be new, and contain nothing but the PCGen folder). \
\
Those terminal commands will delete the place holder files that OS X puts in the folder (.DS_Store hold information on view you had on the folde,r icon layout, icon for the folder, etc.) (.Trashes is the file that tells the OS what files in that folder should be deleted when the trash is emptied).  Once we complete these two terminal commands, it is important not to reopen that folder in Finder again, or the files will be remade. \
\
We now have a pristine folder for PCGen.  Now we will create an OS X installation package for it. \
\

\f0\b Step 5: 
\f1\b0 Creating an installation package \
\

\f0\b 5 A)
\f1\b0  Launch /Developer/Applications/Utilities/PackageMaker \

\f0\b 5 B)
\f1\b0  On the Description tab, fill in relevant information for the Title, Version, and Description fields (I usually just grab the PCGen boiler plate from the website for the Description field).  We can leave the Delete Warning filed blank) \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\ql\qnatural
\cf0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f4 \cf0 In the upper right hand corner of every PCGen Window, right under the \
Divinci sketch is the following text, it is usually what I use.\
\

\f5 PCGen is a character generator for role-playing games. It currently is aimed at supporting as many RPGs as is humanly possible. The project's current focus is on OGL games (OGL is Wizards of the Coast's Open Gaming License). PCGen runs on Windows, Solaris, Mac OS X, and Unix/Linux using Java 1.4.
\f4 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f1 \cf0 \

\f0\b 5 C)
\f1\b0  On the Files tab, click on the Choose button to the right of the Root field.  Navigate to the folder you have the PCGen folder in.  Be sure that the Compress Archive folder is checked. \

\f0\b 5 D)
\f1\b0  On the Resources tab, click on the Choose button to the right of the Resources field.  Navigate to the English.proj folder that is in the archive subfolder of PCGen. \

\f0\b 5 E)
\f1\b0  On the Info tab, enter "/Applications" (without the quotes) in the Default Location field. \

\f0\b 5 F)
\f1\b0  Set the Post-Install Action to No Restart Required.  Set the Authorization Action to No Authorization Required. \

\f0\b 5 G)
\f1\b0  Check the boxes for Aloow Revert to Previous Version, and Relocatable.  All of the other Flags checkboxes should be off. \

\f0\b 5 H)
\f1\b0  On the Version tab, in the Display Name, enter PCGen.  In the Identifier field, enter com.codemonkey.pcgen. \

\f0\b 5 I)
\f1\b0  Enter relevant information in the Get-Info String and Short Version fields.  Enter the first version numeral in the Major field (ie 5), and the number after the first decimal in the minor field (ie 7) \

\f0\b 5 J)
\f1\b0  From the file menu, choose Create Package.  Save the file as PCGenXXX.pkg (If you have not deleted the resource forks from above, you may get a message here saying that PAcakge Maker wants to split the resource forks off, if so, click Split Forks) \

\f0\b 5 K)
\f1\b0  Test your creation, make sure it creates a PCGen folder in your Applciations folder, and that all of the files are installed.  I would launch PCGen for additional testing, just to make sure. \
\
We now have a nicely bundled installer package.  The only problem is that the internet kinda eats .pkg files (since they are really just specially named and configured folders).  Disk images are much better. \
\

\f0\b Step 6: 
\f1\b0 Disk Image creation \
\

\f0\b 6 A)
\f1\b0  Launch /Applications/Utilities/Disk Utility.  Click on the New Image button in the toolbar of the main window.  Name this image "PCGen for OS X.dmg" (without the quotes). \

\f0\b 6 B)
\f1\b0  Mount the disk image and copy the PCGen installation package.  You might also want to put an additional copy of the ReadMe/Release Notes for this version on the image too). \

\f0\b 6 C)
\f1\b0  Unmount/Eject the Image.  In Disk Utility, select the image name in the left sidebar of the main window.  From the Images menu above, select Convert. \

\f0\b 6 D)
\f1\b0  In the Save As: Field, enter a file name of 
\f2 pcgenXXX_mac_install.dmg \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f6\b \cf0 6 E)
\f2\b0  From the Image Format menu towards the bottom of this sheet, select compressed, then click save \

\f6\b 6 F)
\f2\b0  Upload the new image to Eric \
}